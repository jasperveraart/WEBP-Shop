@using Microsoft.AspNetCore.Identity
@using PWebShop.Infrastructure.Identity
@inherits LayoutComponentBase
@inject SignInManager<ApplicationUser> SignInManager
@inject NavigationManager NavigationManager

<div class="appLayout">
    <aside class="sideBar">
        <header class="sideBarHeader">
            <div class="appTitle">PWebShop Admin</div>
        </header>
        <nav class="sideBarNav" aria-label="Main navigation">
            <NavLink class="navItem" href="/" Match="NavLinkMatch.All">
                <span class="navIcon">ğŸ </span>
                <span>Dashboard</span>
            </NavLink>
            <NavLink class="navItem" href="/users">
                <span class="navIcon">ğŸ‘¥</span>
                <span>Users</span>
            </NavLink>
            <NavLink class="navItem" href="/products">
                <span class="navIcon">ğŸ“¦</span>
                <span>Products</span>
            </NavLink>
            <NavLink class="navItem" href="/categories">
                <span class="navIcon">ğŸ—‚ï¸</span>
                <span>Categories</span>
            </NavLink>
            <NavLink class="navItem" href="/orders">
                <span class="navIcon">ğŸ§¾</span>
                <span>Orders</span>
            </NavLink>
        </nav>
        <footer class="profileSection">
            <div class="avatarPlaceholder">AU</div>
            <div class="profileDetails">
                <div class="profileName">Admin User</div>
                <button class="btn btn-sm btn-outline-primary logoutButton" type="button" @onclick="HandleLogoutAsync">Logout</button>
            </div>
        </footer>
    </aside>

    <div class="contentShell">
        <header class="topBar">
            <div class="pageTitle">Admin dashboard</div>
            <div class="topBarActions">
                <!-- Placeholder for actions -->
            </div>
        </header>

        <main class="contentArea">
            <section class="contentCard">
                @Body
            </section>
        </main>
    </div>
</div>

@code {
    private async Task HandleLogoutAsync()
    {
        await SignInManager.SignOutAsync();
        NavigationManager.NavigateTo("/login", forceLoad: true);
    }
}
