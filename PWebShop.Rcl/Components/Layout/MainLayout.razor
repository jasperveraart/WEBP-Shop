
@inherits LayoutComponentBase
@using Microsoft.AspNetCore.Components.Routing
@inject NavigationManager NavigationManager
@using PWebShop.Rcl.Components.Layout
@using PWebShop.Rcl.Components

<LoginModal IsVisible="@ShowLogin" IsVisibleChanged="@((value) => ShowLogin = value)" />
<SignUp IsVisible="@ShowSignUp" IsVisibleChanged="@((value) => ShowSignUp = value)" />


<style>
    .hover-lift:hover {
        box-shadow: 0 .8rem 1.5rem rgba(0,0,0,.3) !important;
        transform: translateY(-3px);
        transition: all 0.2s ease;
    }
    .nav-link:focus,
    .nav-link:focus-visible,
    .nav-link.active:focus {
        outline: none !important;
        box-shadow: 0 0 0 0.15rem rgba(108, 117, 125, 0.5) !important; /* grigio Bootstrap */
        border-radius: 0.25rem;
    }
</style>

<!--  colore vero sidebar   background-color: rgb(37,57,106) -->
<div class="d-flex">
    <!-- SIDEBAR -->
    <aside class="bg-dark text-white d-flex flex-column p-3 vh-100" style="width:250px; position:sticky; top:0;">
        
        <h4 class="text-center mb-4">PWebShop Web</h4>

        <nav class="nav flex-column mb-auto">
            <NavLink href="/" Match="NavLinkMatch.All" class="nav-link text-white d-flex align-items-center mb-2 hover-lift">
                <span class="me-2">üè†</span> Dashboard
            </NavLink>

            <NavLink href="/cart" class="nav-link text-white d-flex align-items-center mb-2 hover-lift">
                <span class="me-2">üõí</span> Cart
            </NavLink>
            <!-- /order -->
            <NavLink href="/supplier/sales" class="nav-link text-white d-flex align-items-center hover-lift">
                <span class="me-2">üßæ</span> Orders
            </NavLink>
        </nav>
        <!--pulsante provissiorio per vedere il modal-->
        
        <button class="w-100 mb-2 btn btn-lg rounded-3 btn-secondary mt-auto" @onclick="() => ShowLogin = true" type="button">Log In</button>
        
        <button class="w-100 mb-2 btn btn-lg rounded-3 btn-primary mt-2" @onclick="() => ShowSignUp = true " type="button">Sign Up</button>
        <!-- PROFILE SECTION -->
        <!--<div class="d-flex justify-content-center mt-auto">
            <div class="card shadow-lg p-2 bg-dark text-white d-flex flex-row w-100"
                 style="cursor: pointer;"
                 @onclick="GoToProfile">

                <div class="rounded-circle bg-secondary d-flex justify-content-center align-items-center text-white me-3"
                     style="width:40px; height:40px;">
                    UN
                </div>

                <div class="ms-2">
                    <div>User Name</div>

                    <a href="/logout"
                       class="btn btn-sm btn-outline-light mt-1"
                       @onclick:stopPropagation="true">
                        Logout
                    </a>
                </div>

            </div>
        </div>-->

        @code {
            void GoToProfile()
            {
                //NavigationManager.NavigateTo("/profile");
                NavigationManager.NavigateTo("/supplier/profile");
            }
        }

    </aside>

    <!-- CONTENT -->
    <div class="flex-grow-1">
        
        <!-- TOPBAR -->
        <header class="bg-light border-bottom p-3 sticky-top d-flex justify-content-between align-items-center">
            <h5 class="m-0">Shop</h5>
            <div>
                <!-- Actions -->
            </div>
        </header>

        <!-- MAIN CONTENT -->
        <main class="p-4">
            <div class="card shadow-lg p-4">
                @Body
            </div>
        </main>

    </div>
</div>

@code {
    [Inject] NavigationManager Nav { get; set; }

    private bool ShowLogin = false;

    private void Logout()
    {
        Nav.NavigateTo("/", true);
    }

    private void OpenLogin()
    {
        ShowLogin = true;
    }
    
    private bool ShowSignUp = false;
    
    
    private void OpenSignUp()
    {
        ShowLogin = true;
    }
    
}